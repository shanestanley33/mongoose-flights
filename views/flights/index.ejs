<%- include('../partials/header.ejs') %>
    <h1>Flight List</h1>
    <table class="table" id="flight-index">
        <thead>
            <th scope="col">Airline</th>
            <th scope="col">Flight Number</th>
            <th scope="col">Departure Date</th>
            <th scope="col">Flight Details</th>
        </thead>
        <tbody>
            <% flights.forEach(function(flight) { 
                    let todayDate = new Date()
                    let flightDate = flight.departs
                    console.log(`todays date: ${todayDate}`)
                    console.log(`comparison date: ${flightDate}`)
                    if (todayDate > flightDate) {
                    
                %>
                <tr>
                    <td class="departed"><%= flight.airline %></td>
                    <td class="departed"><%= flight.flightNo %></td>
                    <td class="departed">
                        <%= flight.departs %>
                    </td>
                    <td><a href="/flights/<%= flight._id %>" class="btn btn-info" id="flight-info-btn">Details</a></td>
                </tr>
            <% } else { %>
                <tr>
                    <td><%= flight.airline %></td>
                    <td><%= flight.flightNo %></td>
                    <td>
                        <%= flight.departs %>
                    </td>
                    <td><a href="/flights/<%= flight._id %>" class="btn btn-info" id="flight-info-btn">Details</a></td>
                </tr>
            <% }}); %>
        </tbody>
    </table>
    <div id="add-flight">
        <a href="/flights/new" class="btn btn-primary btn-lg btn-block">Create New Flight</a>
    </div>
<%- include('../partials/footer.ejs') %>